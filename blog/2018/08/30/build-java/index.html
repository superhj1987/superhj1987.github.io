
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="no-js" lang="zh-CN"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>如何进行Java项目构建？ - 后端技术杂谈</title>
  <meta name="author" content="Mr.RowKey">
  <!--[if lt IE 9]>
    <script src="http://x.papaapp.com/farm1/a571d2/8dda131d/html5shiv.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
    <![endif]-->
  
  <meta name="description" content="如何进行Java项目构建？ Posted by Mr.RowKey in java, pje-book 最新版本可见:https://github.com/superhj1987/pragmatic-java-engineer/blob/master/book/chapter2-project/ &hellip;">
  

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.rowkey.me/blog/2018/08/30/build-java/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <!-- <script src="http://cdn.staticfile.org/jquery/1.9.1/jquery.min.js"></script> -->
  <script src="//cdn.staticfile.org/jquery/2.0.3/jquery.min.js"></script>
  <link href="/atom.xml" rel="alternate" title="后端技术杂谈" type="application/atom+xml">
  <script data-ad-client="ca-pub-8736325488820874" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link rel="stylesheet" href="/stylesheets/comment.css">
<link rel="stylesheet" href="//cdn.staticfile.org/highlight.js/9.10.0/styles/default.min.css">
<style type="text/css">
  span#cnzz_stat_icon_1257166229{
  	display: none !important
  }
  .btn_primary{
    color: #fff;
    background-color: #006dcc;
    background-image: linear-gradient(to bottom,#08c,#04c);
    border-color: rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);
    padding: 4px 12px;
    margin-bottom: 0;
    font-size: 14px;
    line-height: 20px;
    vertical-align: middle;
    cursor: pointer;
    border-radius: 4px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
    display: inline-block;
    text-align: center;
  }
  #recent-comments .comment-widget-content {
      color: #000000 !important;
  }
</style>

  

</head>
<body   >
  <header id="header" class="clearfix">    <!-- cnzz统计 -->
    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1257166229'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1257166229%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                <a id="logo" href="/">
                   后端技术杂谈
                </a>
                <p class="description">What、Why、How</p>
            </div>
            <div id="m-search">
                <section class="widget">
    <form action="http://cn.bing.com/search" method="get" target="_blank" onsubmit="return doSearch(this)">
    <div class="content">
      <input type="text" class="textfield searchtip" name="s" placeholder="请输入关键字" size="24" value="">
    </div>
    </form>
    <form action="http://cn.bing.com/search" method="get" target="_blank" style="display:none" name="frmSearch">
    <div class="content">
      <input type="hidden" name="q" value="">
    </div>
    </form>
</section>
<script type="text/javascript">
  function doSearch(o){
    var $s = $(o).find("input[name=s]");
    var $q = $(o).next("form").find("input[name=q]");
    $q.val($s.val() + " site:rowkey.me");
    $(o).next("form").submit();
    return false;
  }
</script>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="index-nav current" href="/">首页</a>
<a class="talks-nav" href="/blog/talks">技术琐话</a>
<a class="manage-nav" href="/blog/categories/manage">管理</a>
<a class="architecture-nav" href="/blog/categories/architecture">架构</a>
<a class="java-nav" href="/blog/categories/java">Java</a>
<a class="categories-nav" href="/blog/categories">分类</a>
<a class="archives-nav" href="/blog/archives">归档</a>
<a class="about-nav" href="/about_me.html">关于</a>
                </nav>
            </div>
        </div>
    </div>
</header>
  <div id="body">
    <div class="container">
    	<div class="col-group">
			<div class="col-8" id="main">
  <div class="res-cons">
  <article class="post clearfix">
  
  <header>
    
      <h1 class="post-title">如何进行Java项目构建？</h1>
    
    
      <p class="post-meta">
        








  


<time datetime="2018-08-30T19:29:34+08:00" pubdate data-updated="true"></time>
        
        
  

<span class="byline author vcard">Posted by <span class="fn">Mr.RowKey</span></span>
 in 

<span class="categories">
  
    <a class='category' href='/blog/categories/java/'>java</a>, <a class='category' href='/blog/categories/pje-book/'>pje-book</a>
  
</span>


        
      </p>
    
  </header>


<div class="post-content"><p><strong>最新版本可见:<a href="https://github.com/superhj1987/pragmatic-java-engineer/blob/master/book/chapter2-project/build.md">https://github.com/superhj1987/pragmatic-java-engineer/blob/master/book/chapter2-project/build.md</a></strong></p>

<p>对于一个完整的项目来说，一般都有很多的类、很多的包，如果是Web工程那么还有很多jsp、资源文件。这时候如果只用JDK自带的工具编译和运行，是非常困难的一件事前。再者，编译源代码只是软件开发过程的一个方面，更重要的是要把软件发布到生产环境中来产生商业价值。所以，代码编译之后，还有测试、分析代码质量、部署等步骤要做。整个过程进行自动化操作是很有必要的。</p>

<p>这时候就需要一个Java的工程/项目构建工具。这里所谓的项目构建就是指的完成工程发布流程需要的一系列步骤，包括编译、测试、打包、部署等等。虽然用Eclipse和Intellij这些IDE能解决这个问题，但是受限于这些IDE体积庞大且基本上都是GUI的，而后端应用的运行环境基本都是没有显示器的，所以很多时候还是需要一些专门做项目构建的工具来支持这些工作。</p>

<!--more-->


<ul>
<li><a href="#%E4%B8%80.%20Ant">一. Ant</a>

<ul>
<li><a href="#%E4%BB%8B%E7%BB%8D">介绍</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">使用示例</a></li>
<li><a href="#%E6%8F%90%E7%A4%BA">提示</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C.%20Maven">二. Maven</a>

<ul>
<li><a href="#%E4%BB%8B%E7%BB%8D">介绍</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">配置文件</a></li>
<li><a href="#%E6%A0%87%E5%87%86Web%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84">标准Web项目结构</a></li>
<li><a href="#%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86">依赖管理</a></li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B">项目构建流程</a></li>
<li><a href="#Profile%E5%A4%9A%E7%8E%AF%E5%A2%83%E6%94%AF%E6%8C%81">Profile多环境支持</a></li>
<li><a href="#%E5%A4%8D%E7%94%A8test">复用test</a></li>
<li><a href="#Scala%E6%94%AF%E6%8C%81">Scala支持</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6">常用插件</a></li>
<li><a href="#%E6%8F%90%E7%A4%BA">提示</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89.%20Gradle">三. Gradle</a>

<ul>
<li><a href="#%E4%BB%8B%E7%BB%8D">介绍</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">使用示例</a></li>
<li><a href="#%E5%A4%9A%E6%A8%A1%E5%9D%97">多模块</a></li>
<li><a href="#%E6%8F%90%E7%A4%BA">提示</a></li>
</ul>
</li>
</ul>


<h2><a name='一. Ant'></a>一. Ant</h2>

<h3><a name='介绍'></a>介绍</h3>

<p>Ant的全称是Another Neat Tool，意为另一个好用的工具，是Java中比较常用的项目构建工具。构建过程包括编译、测试和部署等。概括来看具有以下三个特点：</p>

<ul>
<li>和传统的Make工具相似，能为我们完成工程发布流程中一系列机械工作。并且具有良好的跨平台特性。</li>
<li>使用XML来表述构建过程与依赖关系，用task替代shell，语义清晰，便于维护。</li>
<li>具有强大的任务系统，便于扩展。其中，task以Java class的形式存在。</li>
</ul>


<p>为了方便使用，Ant自带了很多默认的task，如：</p>

<ul>
<li>echo: 输出信息</li>
<li>mkdir: 创建文件夹</li>
<li>exec: 执行shell命令</li>
<li>delete: 删除文件</li>
<li>copy: 复制文件</li>
</ul>


<p>通过组合这些默认task和自己实现的task就能够完成Java项目的构建任务。</p>

<h3><a name='使用示例'></a>使用示例</h3>

<p>使用Ant需要编写build.xml来配置任务流程。当然，可以通过-f参数指定其他配置文件作为任务流程描述文件。一个Ant的配置文件如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
</span><span class='line'>&lt;project name="helloWorld" basedir="." default="usage"&gt;
</span><span class='line'>    &lt;property name="mvn" value="mvn"/&gt;
</span><span class='line'>    &lt;property name="script.lock" value="/build_home/scripts/lock"/&gt;
</span><span class='line'>
</span><span class='line'>    &lt;target name="usage" description="Prints out instructions"&gt;
</span><span class='line'>        &lt;echo message="使用 'lock' 加锁"/&gt;
</span><span class='line'>        &lt;echo message="使用 'unlock' 解锁"/&gt;
</span><span class='line'>        &lt;antcall target="compile"&gt;
</span><span class='line'>            &lt;param name="profile" value="test"/&gt;
</span><span class='line'>        &lt;/antcall&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>
</span><span class='line'>    &lt;target name="lock"&gt;
</span><span class='line'>        &lt;exec dir="${basedir}" executable="${script.lock}" errorproperty="lock.err"/&gt;
</span><span class='line'>        &lt;fail message="u can use 'ant unlcok to force redeploy'...'"&gt;
</span><span class='line'>            &lt;condition&gt;
</span><span class='line'>                &lt;contains string="${lock.err}" substring="locked"/&gt;
</span><span class='line'>            &lt;/condition&gt;
</span><span class='line'>        &lt;/fail&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>
</span><span class='line'>    &lt;target name="unlock"&gt;
</span><span class='line'>        &lt;delete file="${basedir}/.lock"/&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>
</span><span class='line'>    &lt;target name="compile"&gt;
</span><span class='line'>        &lt;echo message="编译开始"/&gt;
</span><span class='line'>        &lt;exec dir="${basedir}" executable="${mvn}" failonerror="true"&gt;
</span><span class='line'>            &lt;arg line="compile -P ${profile}"/&gt;
</span><span class='line'>        &lt;/exec&gt;
</span><span class='line'>        &lt;exec executable="${mvn}" failonerror="true"&gt;
</span><span class='line'>            &lt;arg value="war:exploded"/&gt;
</span><span class='line'>        &lt;/exec&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>    
</span><span class='line'>    &lt;!--逻辑判断--&gt;
</span><span class='line'>    &lt;target name="testIf" depends="check" if="flag"&gt;
</span><span class='line'>        &lt;echo message="if..."/&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>    
</span><span class='line'>    &lt;target name="testUnless" depends="check" unless="flag"&gt;
</span><span class='line'>        &lt;echo message="unless..."/&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>    
</span><span class='line'>    &lt;target name="check"&gt;
</span><span class='line'>        &lt;condition property="flag"&gt;
</span><span class='line'>            &lt;or&gt;
</span><span class='line'>            &lt;and&gt;
</span><span class='line'>               &lt;isset property="name"/&gt;
</span><span class='line'>               &lt;equals arg1="${version}" arg2="1.0" /&gt;
</span><span class='line'>            &lt;/and&gt;
</span><span class='line'>            &lt;available file="/project.version" type="file"/&gt;
</span><span class='line'>            &lt;/or&gt;
</span><span class='line'>        &lt;/condition&gt;
</span><span class='line'>    &lt;/target&gt;
</span><span class='line'>    &lt;!--逻辑判断end--&gt;
</span><span class='line'>   
</span><span class='line'>&lt;/project&gt;</span></code></pre></td></tr></table></div></figure>


<p>可见，Ant使用顶级元素<project>描述整个工程,使用<property>描述全局属性, 用<target>定义工程中的target以及target间的依赖, 在target中定义task的执行流程。使用antcall来调用target，通过其子节点param传递参数。</p>

<p>此外，在很多场景下需要用到逻辑判断，如if等。Ant中的if如上面的例子所示，是需要搭配target和condition使用的。上面配置中最后的逻辑判断部分，类似如下伪代码：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>if (name ！= null && version.equals("1.0")) || fileExist("/project.version") ){
</span><span class='line'>    echo "if..."
</span><span class='line'>}else{
</span><span class='line'>    echo "unless..."
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>执行<code>ant [target]</code>即可执行任务流程。</p>

<h3><a name='提示'></a>提示</h3>

<ul>
<li>使用Ant时，一个常见的需求就是通过命令行给Ant传递参数，可以通过<code>-Dname=value</code>这种形式来传递，在build.xml中通过<code>${name}</code>来引用即可。</li>
<li><p>对于配置文件中重复出现的元素，可以通过refid引用，减少重复配置。</p>

<pre><code class="``">  &lt;project&gt;
      &lt;path id="project.class.path"&gt;
          &lt;pathelement location="lib/"/&gt;
          &lt;pathelement location="${java.class.path}/"/&gt;
      &lt;/path&gt;

      &lt;target ...&gt;
          &lt;rmic ...&gt;
              &lt;classpath refid="project.class.path"/&gt;
          &lt;/rmic&gt;
      &lt;/target&gt;

      &lt;target ...&gt;
          &lt;javac ...&gt;
              &lt;classpath refid="project.class.path"/&gt;
          &lt;/javac&gt;
      &lt;/target&gt;
  &lt;/project&gt;
</code></pre></li>
</ul>


<h2><a name='二. Maven'></a>二. Maven</h2>

<h3><a name='介绍'></a>介绍</h3>

<p>Maven是继Ant后出现的一款基于约定优于配置原则的项目构建工具。这里所说的“约定优于配置”指的是约定的一些规范无需再配置，例如：其约定好的生命周期、项目结构等。当然，Maven也提供了打破默认约定的配置办法。</p>

<p>概括来讲，Maven具有以下的功能：</p>

<ul>
<li>依赖管理：Maven能够帮助我们解决软件包依赖的管理问题，不再需要提交大量的jar包，引入第三方lib也不需要关心其依赖。</li>
<li>规范目录结构：标准的目录结构有助于项目构建的标准化，使得项目更整洁，还可通过配置profile根据环境的不同读取不同的配置文件。</li>
<li>可以通过每次发布都更新版本号以及统一依赖配置文件来规范软件包的发布。</li>
<li>完整的项目构建阶段：Maven能够对项目完整阶段进行构建。</li>
<li>支持多种插件：面向不同类型的工程项目提供不同的插件。</li>
<li>方便集成：能够集成在IDE中方便使用，和其他自动化构建工具也都能配合使用。</li>
</ul>


<p>可见，相比起Ant，Maven提供了更加强大和规范的功能。</p>

<h3><a name='配置文件'></a>配置文件</h3>

<p>Maven基于pom（Project Object Model）进行。一个项目所有的配置都放置在pom.xml文件中，包括定义项目的类型、名字，管理依赖关系，定制插件的行为等等。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
</span><span class='line'>         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
</span><span class='line'>    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
</span><span class='line'>
</span><span class='line'>    &lt;groupId&gt;me.rowkey&lt;/groupId&gt;
</span><span class='line'>    &lt;artifactId&gt;test&lt;/artifactId&gt;
</span><span class='line'>    &lt;version&gt;1.0.0&lt;/version&gt;
</span><span class='line'>    &lt;packaging&gt;jar&lt;/packaging&gt;
</span><span class='line'>
</span><span class='line'>    &lt;name&gt;rowkey&lt;/name&gt;
</span><span class='line'>    &lt;url&gt;http://maven.apache.org&lt;/url&gt;
</span><span class='line'>
</span><span class='line'>    &lt;repositories&gt;
</span><span class='line'>        &lt;repository&gt;
</span><span class='line'>            &lt;id&gt;nexus-suishen&lt;/id&gt;
</span><span class='line'>            &lt;name&gt;Nexus suishen&lt;/name&gt;
</span><span class='line'>            &lt;url&gt;http://maven.etouch.cn/nexus/content/groups/public/&lt;/url&gt;
</span><span class='line'>            &lt;snapshots&gt;
</span><span class='line'>                &lt;enabled&gt;true&lt;/enabled&gt;
</span><span class='line'>                &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
</span><span class='line'>                &lt;checksumPolicy&gt;warn&lt;/checksumPolicy&gt;
</span><span class='line'>            &lt;/snapshots&gt;
</span><span class='line'>        &lt;/repository&gt;
</span><span class='line'>    &lt;/repositories&gt;
</span><span class='line'>
</span><span class='line'>    &lt;properties&gt;
</span><span class='line'>        &lt;slf4j.version&gt;1.7.21&lt;/slf4j.version&gt;
</span><span class='line'>    &lt;/properties&gt;
</span><span class='line'>
</span><span class='line'>    &lt;dependencies&gt;
</span><span class='line'>
</span><span class='line'>        &lt;dependency&gt;
</span><span class='line'>            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
</span><span class='line'>            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
</span><span class='line'>            &lt;version&gt;${slf4j.version}&lt;/version&gt;
</span><span class='line'>        &lt;/dependency&gt;
</span><span class='line'>
</span><span class='line'>        &lt;dependency&gt;
</span><span class='line'>            &lt;groupId&gt;junit&lt;/groupId&gt;
</span><span class='line'>            &lt;artifactId&gt;junit&lt;/artifactId&gt;
</span><span class='line'>            &lt;version&gt;4.8.2&lt;/version&gt;
</span><span class='line'>            &lt;scope&gt;test&lt;/scope&gt;
</span><span class='line'>        &lt;/dependency&gt;
</span><span class='line'>
</span><span class='line'>    &lt;/dependencies&gt;
</span><span class='line'>
</span><span class='line'>    &lt;build&gt;
</span><span class='line'>        &lt;plugins&gt;
</span><span class='line'>            &lt;plugin&gt;
</span><span class='line'>                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
</span><span class='line'>                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
</span><span class='line'>                &lt;version&gt;2.3.2&lt;/version&gt;
</span><span class='line'>                &lt;configuration&gt;
</span><span class='line'>                    &lt;source&gt;1.7&lt;/source&gt;
</span><span class='line'>                    &lt;target&gt;1.7&lt;/target&gt;
</span><span class='line'>                &lt;/configuration&gt;
</span><span class='line'>            &lt;/plugin&gt;
</span><span class='line'>        &lt;/plugins&gt;
</span><span class='line'>    &lt;/build&gt;
</span><span class='line'>    
</span><span class='line'>    &lt;!--发布配置，用户名和密码需要在$M2_HOME/conf/settings.xml中配置server--&gt;
</span><span class='line'>    &lt;distributionManagement&gt;
</span><span class='line'>        &lt;repository&gt;
</span><span class='line'>            &lt;id&gt;suishen-release&lt;/id&gt;
</span><span class='line'>            &lt;name&gt;Suishen-Releases&lt;/name&gt;
</span><span class='line'>            &lt;url&gt;http://maven.etouch.cn/nexus/content/repositories/Suishen-Releases&lt;/url&gt;
</span><span class='line'>        &lt;/repository&gt;
</span><span class='line'>
</span><span class='line'>        &lt;snapshotRepository&gt;
</span><span class='line'>            &lt;id&gt;suishen-snapshot&lt;/id&gt;
</span><span class='line'>            &lt;name&gt;Suishen-Snapshots&lt;/name&gt;
</span><span class='line'>            &lt;url&gt;http://maven.etouch.cn/nexus/content/repositories/Suishen-Snapshots&lt;/url&gt;
</span><span class='line'>        &lt;/snapshotRepository&gt;
</span><span class='line'>    &lt;/distributionManagement&gt;
</span><span class='line'>
</span><span class='line'>&lt;/project&gt;
</span></code></pre></td></tr></table></div></figure>


<p>其中，</p>

<ul>
<li>Maven使用groupId:artifactId:version三者来唯一标识一个唯一的二进制版本，可以缩写为GAV。</li>
<li>packaging代表打包方式，可选的值有: pom, jar, war, ear, custom，默认为jar。</li>
<li>properties是全局属性的配置</li>
<li>dependencies是对于依赖的管理</li>
<li>plugins是对于插件的管理。</li>
</ul>


<p>此外，可以通过parent实现pom的继承做统一配置管理，子pom中的配置优先级高于父pom。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;?xml version=”1.0″ encoding=”UTF-8″?&gt;
</span><span class='line'>
</span><span class='line'>&lt;project&gt;
</span><span class='line'>
</span><span class='line'>…
</span><span class='line'>
</span><span class='line'>&lt;parent&gt;
</span><span class='line'>
</span><span class='line'>    &lt;artifactId&gt;suishen-parent&lt;/artifactId&gt;
</span><span class='line'>
</span><span class='line'>    &lt;groupId&gt;suishen&lt;/groupId&gt;
</span><span class='line'>
</span><span class='line'>    &lt;version&gt;1.0&lt;/version&gt;
</span><span class='line'>
</span><span class='line'>&lt;/parent&gt;
</span><span class='line'>
</span><span class='line'>…
</span><span class='line'>
</span><span class='line'>&lt;/project&gt;</span></code></pre></td></tr></table></div></figure>


<p>可以继承的元素如下：</p>

<ul>
<li>groupId,version</li>
<li>Project Config</li>
<li>Dependencies</li>
<li>Plugin configuration</li>
</ul>


<p>此外，<dependencyManagement>和<pluginManagement>可以统一做依赖和插件的配置管理，不同于<dependencies>和<plugins>的是，如果子pom中没有声明<dependency>和<plugin>则并不生效。</p>

<h3><a name='标准Web项目结构'></a>标准Web项目结构</h3>

<p>在Maven中，一个Web项目的标准结构，如下图所示：</p>

<p><img src="/post_images/buildjava/mvn-web-arch.png" alt="" /></p>

<p>其中：</p>

<ul>
<li>src/main/java         Java代码目录</li>
<li>src/main/resources    配置文件目录</li>
<li>src/main/webapp       webapp根目录</li>
<li>src/test/java         测试代码目录</li>
<li>src/test/resources    测试配置目录</li>
<li>target/classes        代码编译结果目标目录</li>
<li>target/test-classes   测试代码编译结果目标目录</li>
</ul>


<p>当然，结构是可以自定义的。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> &lt;build&gt;
</span><span class='line'>   &lt;plugins&gt;
</span><span class='line'>       &lt;plugin&gt;
</span><span class='line'>           &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
</span><span class='line'>           &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
</span><span class='line'>           &lt;configuration&gt;
</span><span class='line'>               &lt;warSourceDirectory&gt;WebContent/&lt;/warSourceDirectory&gt;
</span><span class='line'>           &lt;/configuration&gt;
</span><span class='line'>       &lt;/plugin&gt;
</span><span class='line'>   &lt;/plugins&gt;
</span><span class='line'>   &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;
</span><span class='line'>   &lt;testSourceDirectory&gt;test/java&lt;/testSourceDirectory&gt;
</span><span class='line'>   &lt;testResources&gt;
</span><span class='line'>       &lt;testResource&gt;
</span><span class='line'>           &lt;directory&gt;test/resources&lt;/directory&gt;
</span><span class='line'>       &lt;/testResource&gt;
</span><span class='line'>   &lt;/testResources&gt;
</span><span class='line'>   &lt;directory&gt;build&lt;/directory&gt;
</span><span class='line'>&lt;/build&gt;</span></code></pre></td></tr></table></div></figure>


<p>这里，Java代码目录移到了./src中，测试代码目录到了./test/java中，测试资源也到了./test/resources,同时编译结果目录变为了./build。此外，在maven-war-plugin中，也把Web目录的war源码目录改为了./WebContent。</p>

<h3><a name='依赖管理'></a>依赖管理</h3>

<p>依赖管理是通过<dependencies>来定义的，其中：</p>

<ul>
<li>一项jar包依赖可以由groupId:artifactId:version标识</li>
<li>完整的标识为：groupId:artifactId:type:classifier:version</li>
<li>依赖在编译部署中参与的情况可以由scope来指定, 分为: compile、test、provided、system、import，默认为compile。其中的import是在Maven 2.0.9后引入的，仅仅支持在<dependencyManagement>中使用，导入外部的依赖版本管理。</li>
<li>依赖是一个树状结构，采用<strong>最近依赖</strong>原则，也可以通过exclusions标签来排除一些包。这里的最近依赖指的是在依赖树中，离当前结点最近的依赖优先级高，同样远时第一个优先。</li>
</ul>


<p>依赖下载的过程一般如下图所示：</p>

<p><img src="/post_images/buildjava/mvn-dependency-download.png" alt="" /></p>

<p>但上面的示例配置中，如果有一个repsitory的配置，那么依赖下载的过程则发生了改变。</p>

<p><img src="/post_images/buildjava/mvn-dependency-download-1.png" alt="" /></p>

<p>此外，Maven中还有一个镜像库的配置，即在Maven的settings.xml中配置Maven镜像库。和pom.xml中的repository不同的是镜像会拦截住对远程中央库的请求，只在镜像库中进行依赖的搜索以及下载。而如果只是配置了repository，那么在repository中找不到相应的依赖时，会继续去远程中央库进行搜索和下载。</p>

<p>上面所说的镜像库和repository可以通过<a href="http://www.sonatype.org/nexus/">http://www.sonatype.org/nexus/</a>进行搭建。</p>

<h3><a name='项目构建流程'></a>项目构建流程</h3>

<p>Maven的构建生命周期中几个常见phase如下：</p>

<ul>
<li>validate：验证项目以及相关信息是否正确</li>
<li>compile：编译源代码和相关资源文件</li>
<li>test：对测试代码进行测试</li>
<li>package：根据项目类型的不同进行打包</li>
<li>verify： 验证打包的正确性</li>
<li>install：将打好的包安装到本地</li>
<li>deploy：将打好的包发布到远程库中</li>
</ul>


<p>当然，对应上述每一个phase,还有pre、post、proces做前缀的一些phase。还有一些在命令行中不常用的phase如：test-compile、integration-test等。</p>

<p>针对于Java Web项目，一个完整的项目构建流程如下图所示：</p>

<p><img src="/post_images/buildjava/mvn-process.png" alt="" /></p>

<h3><a name='Profile多环境支持'></a>Profile多环境支持</h3>

<p>现实开发中一个很常见的需求就是需要根据不同的环境打包不同的文件或者读取不同的属性值。Maven中的profile即可解决此问题。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;profiles&gt;
</span><span class='line'>   &lt;profile&gt;
</span><span class='line'>       &lt;id&gt;dev&lt;/id&gt;
</span><span class='line'>       &lt;activation&gt;
</span><span class='line'>           &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
</span><span class='line'>       &lt;/activation&gt;
</span><span class='line'>       &lt;properties&gt;
</span><span class='line'>           &lt;resources.dir&gt;src/main/resources/dev&lt;/resources.dir&gt;
</span><span class='line'>       &lt;/properties&gt;
</span><span class='line'>   &lt;/profile&gt;
</span><span class='line'>   &lt;profile&gt;
</span><span class='line'>       &lt;id&gt;test&lt;/id&gt;
</span><span class='line'>       &lt;properties&gt;
</span><span class='line'>           &lt;resources.dir&gt;src/main/resources/test&lt;/resources.dir&gt;
</span><span class='line'>       &lt;/properties&gt;
</span><span class='line'>   &lt;/profile&gt;
</span><span class='line'>   &lt;profile&gt;
</span><span class='line'>       &lt;id&gt;prod&lt;/id&gt;
</span><span class='line'>       &lt;properties&gt;
</span><span class='line'>           &lt;resources.dir&gt;src/main/resources/prod&lt;/resources.dir&gt;
</span><span class='line'>       &lt;/properties&gt;
</span><span class='line'>   &lt;/profile&gt;
</span><span class='line'>
</span><span class='line'>&lt;/profiles&gt;
</span><span class='line'>
</span><span class='line'>&lt;build&gt;
</span><span class='line'>    &lt;filters&gt;  
</span><span class='line'>        &lt;filter&gt;${user.home}/love.properties&lt;/filter&gt;  
</span><span class='line'>    &lt;/filters&gt;  
</span><span class='line'>   &lt;resources&gt;
</span><span class='line'>       &lt;resource&gt;
</span><span class='line'>           &lt;directory&gt;${resources.dir}&lt;/directory&gt;
</span><span class='line'>           &lt;filtering&gt;true&lt;/filtering&gt;  
</span><span class='line'>           &lt;includes&gt;  
</span><span class='line'>               &lt;include&gt;**/*&lt;/include&gt; 
</span><span class='line'>           &lt;/includes&gt; 
</span><span class='line'>        &lt;/resource&gt;
</span><span class='line'>       &lt;resource&gt;
</span><span class='line'>           &lt;directory&gt;src/main/resources&lt;/directory&gt;
</span><span class='line'>           &lt;filtering&gt;true&lt;/filtering&gt;  
</span><span class='line'>           &lt;includes&gt;  
</span><span class='line'>               &lt;include&gt;**/*&lt;/include&gt; 
</span><span class='line'>           &lt;/includes&gt; 
</span><span class='line'>       &lt;/resource&gt;
</span><span class='line'>   &lt;/resources&gt;
</span><span class='line'>&lt;/build&gt;</span></code></pre></td></tr></table></div></figure>


<p>如此，分为dev、test以及prod三种环境，对应每一种环境，其资源文件路径都不一样。在使用mvn时，使用-P参数指定profile即可生效。</p>

<p>此外，示例中resource下的filtering设置为true, 是为了能够在编译过程中将资源文件中的占位符替换为Maven中相应属性对应的值。例如，在resources下的config.properties文件内容：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>resouceDir=${resources.dir}</span></code></pre></td></tr></table></div></figure>


<p>在profile为dev时，编译结束此文件会变为:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>resouceDir=src/main/resources/dev</span></code></pre></td></tr></table></div></figure>


<p>而示例中的filters配置则是将外部文件的属性引入进来，同样也能够使用占位符。</p>

<p>如果是Web项目，想要在webapp下使用占位符，那么则需要配置maven-war-plugin:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;plugin&gt;  
</span><span class='line'>    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;  
</span><span class='line'>    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;  
</span><span class='line'>    &lt;configuration&gt;  
</span><span class='line'>        &lt;webResources&gt;  
</span><span class='line'>            &lt;resource&gt;  
</span><span class='line'>                &lt;filtering&gt;true&lt;/filtering&gt;  
</span><span class='line'>                &lt;directory&gt;src/main/webapp&lt;/directory&gt;  
</span><span class='line'>                &lt;includes&gt;  
</span><span class='line'>                    &lt;include&gt;**/*&lt;/include&gt;  
</span><span class='line'>                &lt;/includes&gt;  
</span><span class='line'>            &lt;/resource&gt;  
</span><span class='line'>        &lt;/webResources&gt;  
</span><span class='line'>        &lt;warSourceDirectory&gt;src/main/webapp&lt;/warSourceDirectory&gt;  
</span><span class='line'>        &lt;webXml&gt;src/main/webapp/WEB-INF/web.xml&lt;/webXml&gt;  
</span><span class='line'>    &lt;/configuration&gt;  
</span><span class='line'>&lt;/plugin&gt;  </span></code></pre></td></tr></table></div></figure>


<h3><a name='复用test'></a>复用test</h3>

<p>当需要将写的测试用例（src/test下的资源和类）以jar包形式发布出去的时候，需要用到test-jar。首先，在打包时配置maven-jar-plugin，如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;plugin&gt;
</span><span class='line'>    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
</span><span class='line'>    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
</span><span class='line'>    &lt;executions&gt;
</span><span class='line'>         &lt;execution&gt;
</span><span class='line'>            &lt;goals&gt;
</span><span class='line'>                &lt;goal&gt;test-jar&lt;/goal&gt;
</span><span class='line'>            &lt;/goals&gt;
</span><span class='line'>            &lt;configuration&gt;
</span><span class='line'>                &lt;excludes&gt;
</span><span class='line'>                    &lt;exclude&gt;*.conf&lt;/exclude&gt;
</span><span class='line'>                    &lt;exclude&gt;**/*.*.conf&lt;/exclude&gt;
</span><span class='line'>                    &lt;exclude&gt;logback.xml&lt;/exclude&gt;
</span><span class='line'>                &lt;/excludes&gt;
</span><span class='line'>            &lt;/configuration&gt;
</span><span class='line'>        &lt;/execution&gt;
</span><span class='line'>    &lt;/executions&gt;
</span><span class='line'>    &lt;configuration&gt;
</span><span class='line'>        &lt;excludes&gt;
</span><span class='line'>            &lt;exclude&gt;*.conf&lt;/exclude&gt;
</span><span class='line'>            &lt;exclude&gt;**/*.*.conf&lt;/exclude&gt;
</span><span class='line'>            &lt;exclude&gt;*.properties&lt;/exclude&gt;
</span><span class='line'>            &lt;exclude&gt;logback.xml&lt;/exclude&gt;
</span><span class='line'>        &lt;/excludes&gt;
</span><span class='line'>    &lt;/configuration&gt;
</span><span class='line'>&lt;/plugin&gt;</span></code></pre></td></tr></table></div></figure>


<p>使用时，指定dependency的type为test-jar：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;dependency&gt;
</span><span class='line'>    &lt;groupId&gt;xx&lt;/groupId&gt;
</span><span class='line'>    &lt;artifactId&gt;xx&lt;/artifactId&gt;
</span><span class='line'>    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
</span><span class='line'>    &lt;type&gt;test-jar&lt;/type&gt;
</span><span class='line'>    &lt;scope&gt;test&lt;/scope&gt;
</span><span class='line'>&lt;/dependency&gt;</span></code></pre></td></tr></table></div></figure>


<h3><a name='Scala支持'></a>Scala支持</h3>

<p>Scala的官方构建工具是sbt，但是由于某些原因，在国内访问很慢。Maven有插件提供了对Scala项目的支持。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;build&gt;
</span><span class='line'>    &lt;plugins&gt;
</span><span class='line'>        &lt;plugin&gt;
</span><span class='line'>            &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;
</span><span class='line'>            &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;
</span><span class='line'>            &lt;version&gt;3.1.6&lt;/version&gt;
</span><span class='line'>            &lt;executions&gt;
</span><span class='line'>               &lt;execution&gt;
</span><span class='line'>                   &lt;id&gt;scala-compile-first&lt;/id&gt;
</span><span class='line'>                   &lt;phase&gt;process-resources&lt;/phase&gt;
</span><span class='line'>                   &lt;goals&gt;
</span><span class='line'>                       &lt;goal&gt;add-source&lt;/goal&gt;
</span><span class='line'>                       &lt;goal&gt;compile&lt;/goal&gt;
</span><span class='line'>                   &lt;/goals&gt;
</span><span class='line'>               &lt;/execution&gt;
</span><span class='line'>               &lt;execution&gt;
</span><span class='line'>                   &lt;id&gt;scala-test-compile&lt;/id&gt;
</span><span class='line'>                   &lt;phase&gt;process-test-resources&lt;/phase&gt;
</span><span class='line'>                   &lt;goals&gt;
</span><span class='line'>                       &lt;goal&gt;testCompile&lt;/goal&gt;
</span><span class='line'>                   &lt;/goals&gt;
</span><span class='line'>               &lt;/execution&gt;
</span><span class='line'>            &lt;/executions&gt;
</span><span class='line'>        &lt;/plugin&gt;
</span><span class='line'>        &lt;plugin&gt;
</span><span class='line'>           &lt;groupId&gt;org.scalatest&lt;/groupId&gt;
</span><span class='line'>           &lt;artifactId&gt;scalatest-maven-plugin&lt;/artifactId&gt;
</span><span class='line'>           &lt;version&gt;1.0-RC2&lt;/version&gt;
</span><span class='line'>           &lt;configuration&gt;
</span><span class='line'>               &lt;reportsDirectory&gt;${project.build.directory}/surefire-reports&lt;/reportsDirectory&gt;
</span><span class='line'>               &lt;junitxml&gt;.&lt;/junitxml&gt;
</span><span class='line'>               &lt;filereports&gt;TestSuite.txt&lt;/filereports&gt;
</span><span class='line'>               &lt;stdout&gt;testOutput&lt;/stdout&gt;
</span><span class='line'>           &lt;/configuration&gt;
</span><span class='line'>           &lt;executions&gt;
</span><span class='line'>               &lt;execution&gt;
</span><span class='line'>                   &lt;id&gt;test&lt;/id&gt;
</span><span class='line'>                   &lt;goals&gt;
</span><span class='line'>                       &lt;goal&gt;test&lt;/goal&gt;
</span><span class='line'>                   &lt;/goals&gt;
</span><span class='line'>               &lt;/execution&gt;
</span><span class='line'>           &lt;/executions&gt;
</span><span class='line'>        &lt;/plugin&gt;
</span><span class='line'>       &lt;plugin&gt;
</span><span class='line'>           &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
</span><span class='line'>           &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;
</span><span class='line'>           &lt;version&gt;1.2.1&lt;/version&gt;
</span><span class='line'>           &lt;configuration&gt;
</span><span class='line'>               &lt;executable&gt;scala&lt;/executable&gt;
</span><span class='line'>               &lt;arguments&gt;
</span><span class='line'>                   &lt;argument&gt;-classpath&lt;/argument&gt;
</span><span class='line'>                   &lt;classpath/&gt;
</span><span class='line'>                   &lt;argument&gt;&lt;/argument&gt;
</span><span class='line'>               &lt;/arguments&gt;
</span><span class='line'>           &lt;/configuration&gt;
</span><span class='line'>       &lt;/plugin&gt;
</span><span class='line'>&lt;/plugins&gt;</span></code></pre></td></tr></table></div></figure>


<p>net.alchim31.maven.scala-maven-plugin提供了对Scala代码的编译；org.scalatest.scalatest-maven-plugin提供了对Scala项目的测试；exec-maven-plugin配置了对Scala程序的执行。</p>

<h3><a name='常用插件'></a>常用插件</h3>

<p>Maven提供了很多插件方便开发工作。</p>

<ul>
<li><p>maven-source-plugin</p>

<p>  源码发布插件，绑定在compile阶段，执行jar goal, 将源码以jar包的形式发布出去。</p></li>
<li><p>maven-javadoc-plugin</p>

<p>  javadoc插件，将源码的javadoc发布出去。</p></li>
<li><p>maven-archetype-plugin</p>

<p>  使用此插件可以定制/使用项目模板。定制模板可以遵循archetype的结构编写文件，也可以使用mvn archetype:create-from-project从一个现有的项目生成；使用模板通过archetype:generate即可。</p></li>
<li><p>maven-tomcat7-plugin</p>

<p>  此插件可以直接使用Tomcat运行web项目，常用的命令是：<code>mvn tomcat7:run</code>。同样的还有jetty-maven-plugin。</p></li>
<li><p>maven-shade-plugin</p>

<p>  此插件是maven常用打包插件，一般是将其绑定在package阶段，执行其shade goal。能够将源码和依赖的第三方资源打包在一起以供独立运行。</p></li>
<li><p>maven-assesmbly-plugin</p>

<p>  和maven-shade-plugin一样也是打包插件，但是其功能更加强大，输出压缩包格式除了jar还支持tar、zip、gz等。</p></li>
<li><p>maven-gpg-plugin</p>

<p>  此插件是jar包的签名插件，可以对自己发布的jar包进行签名。</p></li>
</ul>


<h3><a name='提示'></a>提示</h3>

<ul>
<li>在项目版本号中加入<code>SNAPSHOT</code>后缀做为快照版本可以使得Maven每次都能自动获取最新版本而无需频繁更新版本号。</li>
<li><code>mvn -DNAME=test</code>可以传递给pom参数，使用${NAME}引用即可。</li>
<li><p>在dependency中设置optional为true, 可使得此依赖不传递出去。如下：</p>

<pre><code class="``">  ...
  &lt;artifactId&gt;suishen-libs&lt;/artifactId&gt;
  ...

  ...
  &lt;dependency&gt;
     &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;
     &lt;artifactId&gt;httpasyncclient&lt;/artifactId&gt;
     &lt;version&gt;4.1.3&lt;/version&gt;
     &lt;optional&gt;true&lt;/optional&gt;
  &lt;/dependency&gt;
  ...
</code></pre>

<p>  如此，依赖于suishen-lib的项目除非在自己的pom里显示声明，否则不会依赖于httpasyncclient。</p></li>
<li><p>由于Maven自定义plugin的复杂度，不够灵活，因此很多时候都是结合Ant的灵活性和Maven一起使用的。</p>

<pre><code class="``">  &lt;target name="compile" depends="clean"&gt;
    &lt;exec executable=“mvn"&gt;
            &lt;arg line="compile"/&gt;
    &lt;/exec&gt;
  &lt;/target&gt;

  &lt;target name="compile" depends="clean"&gt;
    &lt;exec executable=“cmd"&gt;
            &lt;arg line=“/c mvn compile"/&gt;
    &lt;/exec&gt;
  &lt;/target&gt;
</code></pre></li>
<li><p>日常开发中一个工程可能比较庞大，这时可以把这个工程拆分成多个子模块来管理。一个多模块工程包含一个父pom，在其中定义了它的子模块，每个子模块都是一个独立的工程。</p>

<pre><code class="``">  &lt;project&gt;
      …
      &lt;packaging&gt;pom&lt;/packaging&gt;

      &lt;modules&gt;
          &lt;module&gt;module-1&lt;/module&gt;
          &lt;module&gt;module-2&lt;/module&gt;
      &lt;/modules&gt;
  &lt;/project&gt;
</code></pre></li>
<li>可以使用第三方的takari/maven-wrapper(<code>mvn -N io.takari:maven:wrapper -Dmaven=3.3.3</code>)来做Maven操作（<code>./mvnw clean</code>），从而可以达到类似gradle wrapper的功能：不用预先安装好Maven，还能够统一项目所使用的Maven版本。</li>
</ul>


<h2><a name='三. Gradle'></a>三. Gradle</h2>

<h3><a name='介绍'></a>介绍</h3>

<p>Gradle是目前正在开始流行的新一代构建工具，正在逐步的被大家推广使用，尤其以Android为典型。基本上现在所有的Android项目都采用Gradle做为项目构建工具。概括来讲，有以下几个特点：</p>

<ul>
<li>采用了Groovy DSL来定义配置，相比起XML更加易于学习和使用，并大大简化了构建代码的行数。此外，这种“配置即代码”的方式能够大大简化配置学习和插件编写的成本，提供了更好的灵活性。</li>
<li>在构建模型上非常灵活。可以轻松创建一个task，并随时通过depends语法建立与已有task的依赖关系。这里Gradle使用了Java插件来支持Java项目的标准构建生命周期（和Maven类似）。</li>
<li>依赖的scope简化为compile、runtime、testCompile、testRuntime四种。</li>
<li>支持动态的版本依赖。在版本号后面使用+号的方式可以实现动态的版本管理。</li>
<li>支持排除传递性依赖或者干脆关闭传递性依赖。</li>
<li>完全支持Maven、Ivy的资源库（Repository）。</li>
</ul>


<h3><a name='使用示例'></a>使用示例</h3>

<p>Gradle的配置写在build.gradle文件中。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>apply plugin: 'groovy'
</span><span class='line'>apply plugin: 'idea'
</span><span class='line'>apply plugin: 'checkstyle'
</span><span class='line'>
</span><span class='line'>// --- properties ---
</span><span class='line'>ext.ideaInstallationPath = '/Applications/IntelliJ IDEA.app/Contents'
</span><span class='line'>ext.pomCfg = {
</span><span class='line'>  name 'me.rowkey.libs'
</span><span class='line'>  description '&lt;project_desc&gt;'
</span><span class='line'>  ...
</span><span class='line'>}
</span><span class='line'>sourceCompatibility = 1.6
</span><span class='line'>// --- properties ---
</span><span class='line'>
</span><span class='line'>//源码目录结构
</span><span class='line'>sourceSets.main.java.srcDirs = []
</span><span class='line'>sourceSets.main.groovy.srcDir 'src/main/java'
</span><span class='line'>
</span><span class='line'>//增加repository
</span><span class='line'>repositories {
</span><span class='line'>    mavenLocal()
</span><span class='line'>    maven{
</span><span class='line'>        url "http://maven.etouch.cn/nexus/content/groups/public/"
</span><span class='line'>    }
</span><span class='line'>    mavenCentral()
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>//依赖管理
</span><span class='line'>dependencies {
</span><span class='line'>    compile fileTree(dir: ideaInstallationPath + '/lib', include: '*.jar')
</span><span class='line'>    testCompile 'org.mockito:mockito-core:2.0.3-beta'
</span><span class='line'>    testCompile 'org.assertj:assertj-core:1.7.1'
</span><span class='line'>    testCompile 'org.springframework:spring-test:4.0.0.RELEASE'
</span><span class='line'>    
</span><span class='line'>    // 排除全部或特定的间接依赖
</span><span class='line'>    runtime ('commons-dbcp:commons-dbcp:1.4') {
</span><span class='line'>        transitive = false
</span><span class='line'>        // 或 exclude group: xxx, module: xxx
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    // 然后显式声明
</span><span class='line'>    runtime 'commons-pool:commons-pool:1.6'
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>//for gradle wrapper
</span><span class='line'>task wrapper(type: Wrapper) {
</span><span class='line'>    gradleVersion = '3.0'
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>task helloWorld
</span><span class='line'>
</span><span class='line'>helloWorld &lt;&lt; {
</span><span class='line'>    println "Hello World!"
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>task testA(dependsOn:helloWorld)
</span><span class='line'>
</span><span class='line'>testA &lt;&lt; {
</span><span class='line'>    println "test"
</span><span class='line'>}
</span><span class='line'>task copyFile(type: Copy)
</span><span class='line'>//task(copyFile(type: Copy))
</span><span class='line'>
</span><span class='line'>copyFile {
</span><span class='line'>    from 'xml'
</span><span class='line'>    into 'destination'
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>//发布到Maven库的配置
</span><span class='line'>uploadArchives {
</span><span class='line'>  repositories {
</span><span class='line'>    mavenDeployer {
</span><span class='line'>      repository(url: &lt;repo_url&gt;) {
</span><span class='line'>       //身份认证信息推荐放在$HOME/.gradle/gradle.properties中
</span><span class='line'>        authentication(
</span><span class='line'>          userName: &lt;repo_user&gt;,
</span><span class='line'>          password: &lt;repo_passwd&gt;)
</span><span class='line'>      }
</span><span class='line'>      pom.project pomCfg
</span><span class='line'>    }
</span><span class='line'>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>可见，依赖的配置（dependencies）相比Maven,得到了大大的简化，对于任务的定义（task）也非常简单。</p>

<h3><a name='多模块'></a>多模块</h3>

<ul>
<li><p>首先，在工程的根目录下，创建settings.gradle。</p>

<pre><code class="``">  include "common", "api"
</code></pre>

<p>  以上即表示包含根目录下的两个子模块common和api。</p></li>
<li><p>在根目录的build.gradle中定义公共构建逻辑：</p>

<pre><code class="``">  subprojects {
      apply plugin: 'java'

      repositories {
          mavenCentral()
      }

      // 所有的子模块共同的依赖
      dependencies {
          ...
      }
  }
</code></pre>

<p>  subprojects中定义的内容对所有子模块都有效，包括属性、依赖以及Task定义。</p>

<p>  需要注意的是在多模块配置下，gradle命令会对所有子模块都执行。如果想要针对单个模块，需要指定模块前缀，如: gradle :common:clean</p></li>
<li><p>在子模块下创建build.gradle，其中的配置可以增量覆盖父工程中的公共配置。如:</p>

<pre><code class="``">  ...

  dependencies {
      compile project(':common')
      ...
  }
</code></pre>

<p>  以上声明了此模块依赖于common模块，当构建此模块时会首先编译打包common模块。相比起Maven每次都要install所依赖的模块，大大简化了使用。</p></li>
</ul>


<h3><a name='提示'></a>提示</h3>

<ul>
<li>gradle -Penv=test可以传递参数，使用env引用即可。这里需要注意的是Gradle中默认并没有提供Maven的profile支持，但是可以利用-P参数自己实现此功能。</li>
<li>Gradle中的配置中的语法和平常所见的Groovy非常不同, 其利用了Groovy的AST转换等特性实现了自己的一套语法。</li>
<li>建议使用<strong>gradle wrapper</strong>（gradle wrapper &ndash;gradle-version 3.0）来做gradle操作（./gradlew clean）。一方面可以使得项目成员不用预先安装好Gradle，还能够统一项目所使用的Gradle版本。</li>
<li>务必要保持构建脚本简洁、清晰，如：把属性、常量（如版本号）放到gradle.properties中。</li>
<li>模块化构建脚本，通过plugin机制在多个项目中重用，共享相关的配置：apply from: <link_to_gradle>。通过此种方式可以统一团队或者公司的一些构建规范、依赖版本等。</li>
</ul>


<blockquote><p>本文节选自《Java工程师修炼之道》一书。</p></blockquote>

<p><img src="/post_images/book-all.png" width="400"/></p>
</div>
<!-- <div style="width:100%;text-align:center;display: none" id="wxFooter">
  <img src="/images/blog_images/h.png"/>
  <p style="color: rgb(58, 65, 69);"><strong>ID: servertalk</strong></p>
  <img src="/images/blog_images/mp-qrcode.jpg"/>
  <p style="color: rgb(178, 178, 178);"><strong>关注[<span style="color:red !important;">后端技术杂谈</span>]</strong></p>
  <p style="color: rgb(178, 178, 178);"><strong>把握后端技术</strong></p>
</div>
<script>
var browser = {
  versions: function () {
      var u = navigator.userAgent, app = navigator.appVersion;
      return {         //移动终端浏览器版本信息
          trident: u.indexOf('Trident') > -1, //IE内核
          presto: u.indexOf('Presto') > -1, //opera内核
          webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
          gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
          mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
          ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
          android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或uc浏览器
          iPhone: u.indexOf('iPhone') > -1, //是否为iPhone或者QQHD浏览器
          iPad: u.indexOf('iPad') > -1, //是否iPad
          webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
      };
  }(),
  language: (navigator.browserLanguage || navigator.language).toLowerCase()
}
if (browser.versions.mobile) {//判断是否是移动设备打开。browser代码在下面
  // var ua = navigator.userAgent.toLowerCase();//获取判断用的对象
  // if (ua.match(/MicroMessenger/i) == "micromessenger") {
  $("div#wxFooter").show();
  // }
  // if (ua.match(/WeiBo/i) == "weibo") {
  //         //在新浪微博客户端打开
  // }
  // if (ua.match(/QQ/i) == "qq") {
  //         //在QQ空间打开
  // }
  // if (browser.versions.ios) {
  //         //是否在IOS浏览器打开
  // } 
  // if(browser.versions.android){
  //         //是否在安卓浏览器打开
  // }
} 
</script> -->


  <div class="_dj8d8fo8gk" style="display:none"></div>
  <div class="_ywga8i2zs8c"></div>
  <footer class="post-footer">
    
      <!-- <div class="sharing">
  
  
  
</div>
 -->
 <div class="share"  style='margin-bottom:15px'>

</div>

    
    <div class="meta">
      
        <a class="basic-alignment left" style="float:left !important" href="/blog/2018/09/20/arch-new/" title="上一篇: 架构设计与原则（2018修订版）">&laquo; 架构设计与原则（2018修订版） </a>
      
      
        <a class="basic-alignment right" style="float:right !important" href="/blog/2018/07/28/manage-notes/" title="下一篇: 管理的一些要点">管理的一些要点 &raquo;</a>
      
    </div>
  </footer>
</article>


<h2>评论</h2>
<div id="comment-thread"></div>

  </div>
</div>

  <aside id="secondary">
  <div id="sidebar">
  
    <section class="widget" style="font-size:9pt" id="ads">
    <div class="_azq7d9qhrfo"></div>
</section><section class="widget" style="font-size:9pt" id="copyright">
<p><span style="font-weight:bold">版权声明：</span>本博客所有文章为博主原创或翻译文章，采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享4.0</a> 国际许可协议共享，转载请注明作者和原文链接。</p>
</section><section class="widget">
    <form action="http://cn.bing.com/search" method="get" target="_blank" onsubmit="return doSearch(this)">
    <div class="content">
      <input type="text" class="textfield searchtip" name="s" placeholder="请输入关键字" size="24" value="">
    </div>
    </form>
    <form action="http://cn.bing.com/search" method="get" target="_blank" style="display:none" name="frmSearch">
    <div class="content">
      <input type="hidden" name="q" value="">
    </div>
    </form>
</section>
<script type="text/javascript">
  function doSearch(o){
    var $s = $(o).find("input[name=s]");
    var $q = $(o).next("form").find("input[name=q]");
    $q.val($s.val() + " site:rowkey.me");
    $(o).next("form").submit();
    return false;
  }
</script><!--公告-->
<section class="widget" id="notice">
	<p>中华万年历/微鲤看看技术团队长期求<a href="https://m.zhipin.com/weijd/v2/job/0cdf0b4c4c3029521nN5392-FFc~" style="font-weight: bold" target="_blank">各研发职位</a>，感兴趣者可发送简历到<a href="mailto:hang@weli.cn">hang@weli.cn</a>。</p>
	<div style="margin-bottom: 10px">
	原博客：<a href="http://srhang.iteye.com/" target="_blank">http://srhang.iteye.com/</a>
	</div>
</section><section class="widget" id="social">
		
		<a class="weibo" href="http://weibo.com/superhj1987" title="Weibo" target="_blank">Weibo</a>
		
		
			<a class="github" href="https://github.com/superhj1987" title="GitHub" target="_blank">GitHub</a>
		
		
		
		
			<a class="linkedin" href="http://www.linkedin.com/in/superhj1987" title="LinkedIn" target="_blank">LinkedIn</a>
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS" target="_blank">RSS</a>
		
</section><section class="widget">
	<h3 class="widget-title">最新文章</h3>
	<ul class="widget-list">
		
     	<li>
      	  <a href="/blog/2023/05/29/web3/">Web3学习笔记-Web是什么？</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2022/06/04/arch-usage_%E5%89%AF%E6%9C%AC/">架构简明指南2022最新版</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2022/05/04/article-notes/">阅文笔记202205</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2022/02/13/my2021/">我的2021</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2021/08/13/game/">做游戏业务以来的一些感悟</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2021/03/31/ali-manage/">阿里巴巴管理三板斧</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2021/01/13/my2020/">我的2020</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2020/08/13/dev-efficacy-talk/">研发效能杂谈</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2020/07/31/project-manage/">项目管理标准模板</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2020/06/27/mytalk/">你要成为什么样的人？</a>
      	</li>
    	
	</ul>
</section>
<section class="widget" style="margin-bottom: 0px !important">
	<h3 class="widget-title">最新评论</h3>
	<div id="recent-comments">暂无</div>
</section>


<section>
  <h3 class="widget-title">GitHub Repos</h3>
  <ul id="gh_repos" class="widget-list">
    <li class="loading">数据读取中...</li>
  </ul>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'superhj1987',
            count: 3,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section class="widget">
	<h3 class="widget-title">技术酷站</h3>
	<ul class="widget-list">
     	<li><a href="http://toutiao.io/" target="_blank">开发者头条</a></li>
     	<li><a href="https://dzone.com/java-jdk-development-tutorials-tools-news" target="_blank">DZone - Java Zone</a></li>
		<li><a href="http://ifeve.com/" target="_blank">并发编程网</a></li>
	</ul>
</section>
  
  </div>
</aside>


      	</div>
    </div>
  </div>
  <footer id="footer">
  	<div class="container">
	Copyright &copy; 2023 - Mr.RowKey - 京ICP备20027460号 -
  <span class="credit">Powered by <a rel="nofollow" href="http://octopress.org">Octopress</a></span>
  - <span class="credit">Theme by <a rel="nofollow" href="http://pagecho.com">Cho</a></span>


</div>
<link href="/stylesheets/scrollUp.min.css" media="screen, projection" rel="stylesheet" type="text/css">
<script type="text/javascript" src="/javascripts/libs/jquery.scrollUp.min.js"></script>
<script src="//cdn.staticfile.org/marked/0.3.6/marked.min.js"></script>
<script src="//cdn.staticfile.org/timeago.js/3.0.1/timeago.min.js"></script>
<script src="//cdn.staticfile.org/spin.js/2.3.2/spin.min.js"></script>
<script src="//cdn.staticfile.org/highlight.js/9.10.0/highlight.min.js"></script>
<script type="text/javascript">
  marked.setOptions({
  highlight: function (code, lang) {
     return hljs.highlightAuto(code).value;
  }
  });
  function Highlighting(){
    var markdowns = document.getElementsByClassName('markdown');
    for(var i=0;i<markdowns.length;i++){
       if(markdowns[i].innerHTML) markdowns[i].innerHTML =marked(markdowns[i].innerHTML);
    }
  }
  window.addEventListener('DOMContentLoaded', Highlighting, false);
  window.addEventListener('load', Highlighting, false);
</script>
<script src="/javascripts/comment.js"></script>
<script type="text/javascript">
$(function(){
	$.scrollUp({
		appendId: 'footer'
	});
});
var opt = {
   type: "github",
   user: "superhj1987",
   repo: "superhj1987.github.io",
   no_comment: "还没有评论",
   go_to_comment: "点击评论",
   issue_title: "如何进行Java项目构建？",
   btn_class: "btn_primary",
   comments_target: "#comment-thread",
   loading_target: "#loading-spin",
   client_id: "",
   client_secret: ""
};
getComments(opt);
opt = {
   type: "github",
   user: "superhj1987",
   repo: "superhj1987.github.io",
   recent_comments_target: "#recent-comments",
   count: 5,
   client_id: "",
   client_secret: ""
};
getRecentCommentsList(opt);
</script>
<script type="text/javascript">
   (window.slotbydup = window.slotbydup || []).push({
       id: "u6803601",
       container: "_azq7d9qhrfo",
       async: true
   });
   (window.slotbydup = window.slotbydup || []).push({
       id: "u6803483",
       container: "_ywga8i2zs8c",
       async: true
   });
   (window.slotbydup = window.slotbydup || []).push({
       id: "u6803481",
       container: "_dj8d8fo8gk",
       async: true
   });
</script>
<!-- 多条广告如下脚本只需引入一次 -->
<script type="text/javascript" src="//cpro.baidustatic.com/cpro/ui/cm.js" async="async" defer="defer" >
</script>
  </footer>
  











</body>
</html>
